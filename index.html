<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Routine Control</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Pretendard', sans-serif; -webkit-tap-highlight-color: transparent; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Icons
        const Icon = {
            Check: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2.5" d="M5 13l4 4L19 7"/></svg>,
            Download: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 16v1a2 2 0 002 2h12 a2 2 0 002-2v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>,
            Settings: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
        };

        function RoutineTracker() {
            const [currentMonth, setCurrentMonth] = useState(new Date().getMonth() + 1);
            const [currentWeek, setCurrentWeek] = useState(1); // ë‹¨ìˆœí™”ëœ ì£¼ì°¨ í‘œì‹œ
            const [routines, setRoutines] = useState(null);

            const storageKey = `routine-2026-${currentMonth}-${currentWeek}`;

            useEffect(() => {
                const saved = localStorage.getItem(storageKey);
                setRoutines(saved ? JSON.parse(saved) : {
                    sleep: Array(7).fill(false),
                    reading: Array(7).fill(false),
                    exercise: Array(3).fill(false),
                    stairs: Array(2).fill(false),
                    coffee: { success: false, fail: false },
                    english: Array(3).fill(false),
                    aiSummary: false,
                    aiQuestion: false,
                    childTalk: false,
                    energyMoment: '',
                    keepNext: '',
                    weight: ''
                });
            }, [currentMonth, currentWeek]);

            const updateRoutines = (newData) => {
                setRoutines(newData);
                localStorage.setItem(storageKey, JSON.stringify(newData));
            };

            const toggleCheck = (category, index = null) => {
                const newData = { ...routines };
                if (Array.isArray(newData[category])) {
                    newData[category][index] = !newData[category][index];
                } else if (category === 'coffee') {
                    newData.coffee[index] = !newData.coffee[index];
                    if (index === 'success' && newData.coffee.success) newData.coffee.fail = false;
                    if (index === 'fail' && newData.coffee.fail) newData.coffee.success = false;
                } else {
                    newData[category] = !newData[category];
                }
                updateRoutines(newData);
            };

            if (!routines) return null;

            return (
                <div className="max-w-md mx-auto min-h-screen flex flex-col pb-20">
                    {/* GNB - ì›”ë³„ ì„¹ì…˜ */}
                    <nav className="sticky top-0 bg-white/80 backdrop-blur-md z-10 border-b">
                        <div className="flex overflow-x-auto no-scrollbar px-4 py-3 gap-6 text-sm font-medium text-gray-400">
                            {[...Array(12)].map((_, i) => (
                                <button 
                                    key={i} 
                                    onClick={() => setCurrentMonth(i + 1)}
                                    className={`${currentMonth === i + 1 ? "text-blue-600 border-b-2 border-blue-600" : ""} pb-1 whitespace-nowrap`}
                                >
                                    {i + 1}ì›”
                                </button>
                            ))}
                        </div>
                        {/* Week ì„¹ì…˜ */}
                        <div className="flex justify-around py-2 bg-gray-50 text-xs text-gray-500 border-b">
                            {[1, 2, 3, 4, 5].map(w => (
                                <button 
                                    key={w}
                                    onClick={() => setCurrentWeek(w)}
                                    className={`px-3 py-1 rounded-full ${currentWeek === w ? "bg-white text-blue-600 shadow-sm font-bold" : ""}`}
                                >
                                    {w}ì£¼ì°¨
                                </button>
                            ))}
                        </div>
                    </nav>

                    <main className="p-4 space-y-4 flex-1">
                        {/* ë°ì¼ë¦¬ ë£¨í‹´ ì¹´ë“œ */}
                        <section className="bg-white rounded-2xl p-5 shadow-sm border border-gray-100">
                            <h2 className="text-sm font-bold text-gray-800 mb-4 flex items-center gap-2">
                                ğŸ“… ì£¼ê°„ ë°˜ë³µ ë£¨í‹´ <span className="text-[10px] bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full text-normal">Daily</span>
                            </h2>
                            <div className="space-y-6">
                                <RoutineRow label="ğŸ›Œ ìˆ˜ë©´ (12ì‹œ ì „)" data={routines.sleep} onToggle={(i) => toggleCheck('sleep', i)} />
                                <RoutineRow label="ğŸ“š 10ë¶„ ë…ì„œ" data={routines.reading} onToggle={(i) => toggleCheck('reading', i)} />
                            </div>
                        </section>

                        {/* ëª©í‘œ ë‹¬ì„± ì¹´ë“œ */}
                        <section className="grid grid-cols-2 gap-4">
                            <div className="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
                                <h3 className="text-xs font-bold text-gray-500 mb-3">ğŸƒ ìš´ë™ (ì£¼3)</h3>
                                <div className="flex gap-2">
                                    {routines.exercise.map((v, i) => <SquareCheck key={i} checked={v} onClick={() => toggleCheck('exercise', i)} />)}
                                </div>
                            </div>
                            <div className="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
                                <h3 className="text-xs font-bold text-gray-500 mb-3">ğŸ—£ï¸ ì˜ì–´ (ì£¼3)</h3>
                                <div className="flex gap-2">
                                    {routines.english.map((v, i) => <SquareCheck key={i} checked={v} onClick={() => toggleCheck('english', i)} />)}
                                </div>
                                <div className="bg-white rounded-2xl p-4 shadow-sm border border-gray-100">
                                <h3 className="text-xs font-bold text-gray-500 mb-3">ğŸ—£ï¸ ê³„ë‹¨ (ì£¼3)</h3>
                                <div className="flex gap-2">
                                    {routines.english.map((v, i) => <SquareCheck key={i} checked={v} onClick={() => toggleCheck('english', i)} />)}
                            </div>
                        </section>

                        {/* AI ë° ê¸°íƒ€ ê¸°ë¡ */}
                        <section className="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 space-y-4">
                            <div className="flex items-center justify-between">
                                <span className="text-sm font-semibold text-gray-700">ğŸ¤– AI ìŠ¤í„°ë”” (ìš”ì•½/ì§ˆë¬¸)</span>
                                <div className="flex gap-2">
                                    <SquareCheck checked={routines.aiSummary} onClick={() => toggleCheck('aiSummary')} />
                                    <SquareCheck checked={routines.aiQuestion} onClick={() => toggleCheck('aiQuestion')} />
                                </div>
                            </div>
                            <div className="flex items-center justify-between border-t pt-4">
                                <span className="text-sm font-semibold text-gray-700">ğŸ‘¦ ì•„ì´ì™€ ì§„ì†”í•œ ëŒ€í™”</span>
                                <SquareCheck checked={routines.childTalk} onClick={() => toggleCheck('childTalk')} />
                            </div>
                        </section>

                        {/* ë‚˜ íƒêµ¬ (í…ìŠ¤íŠ¸) */}
                        <section className="bg-white rounded-2xl p-5 shadow-sm border border-gray-100 space-y-4">
                            <h2 className="text-sm font-bold text-gray-800">ğŸ§  ë‚˜ì˜ ì„±ì¥ ë¦¬í¬íŠ¸</h2>
                            <textarea 
                                value={routines.energyMoment}
                                onChange={(e) => updateRoutines({...routines, energyMoment: e.target.value})}
                                placeholder="ì´ë²ˆ ì£¼ ì—ë„ˆì§€ ìƒìŠ¹ ìˆœê°„..."
                                className="w-full bg-gray-50 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-100"
                                rows="2"
                            />
                            <div className="flex items-center gap-3">
                                <span className="text-sm font-semibold text-gray-700 whitespace-nowrap">ğŸ“‰ ì²´ì¤‘</span>
                                <input 
                                    type="text" 
                                    value={routines.weight}
                                    onChange={(e) => updateRoutines({...routines, weight: e.target.value})}
                                    placeholder="00.0kg"
                                    className="w-full bg-gray-50 rounded-lg px-3 py-2 text-sm focus:outline-none"
                                />
                            </div>
                        </section>
                    </main>

                    {/* í•˜ë‹¨ ë°ì´í„° ê´€ë¦¬ ì„¹ì…˜ */}
                    <footer className="p-6 bg-gray-100 space-y-4 border-t">
                        <div className="flex justify-between items-center text-gray-500 text-xs mb-2">
                            <span>ê´€ë¦¬ ë° ë°±ì—…</span>
                            <span>v2.0 Mobile Optimized</span>
                        </div>
                        <div className="grid grid-cols-2 gap-3">
                            <button onClick={() => alert('ì „ì²´ ë°ì´í„°ë¥¼ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.')} className="flex items-center justify-center gap-2 bg-white border border-gray-200 py-3 rounded-xl text-sm font-medium shadow-sm active:scale-95 transition-transform">
                                <Icon.Download /> ë°ì´í„° ë°±ì—…
                            </button>
                            <label className="flex items-center justify-center gap-2 bg-white border border-gray-200 py-3 rounded-xl text-sm font-medium shadow-sm active:scale-95 transition-transform cursor-pointer">
                                <Icon.Settings /> ë³µì›í•˜ê¸°
                                <input type="file" className="hidden" />
                            </label>
                        </div>
                    </footer>
                </div>
            );
        }

        // Sub-components
        function RoutineRow({ label, data, onToggle }) {
            const days = ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'];
            return (
                <div className="space-y-2">
                    <p className="text-xs font-semibold text-gray-400">{label}</p>
                    <div className="flex justify-between">
                        {data.map((checked, i) => (
                            <div key={i} className="flex flex-col items-center gap-2">
                                <span className="text-[10px] text-gray-400">{days[i]}</span>
                                <SquareCheck checked={checked} onClick={() => onToggle(i)} size="large" />
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function SquareCheck({ checked, onClick, size = "normal" }) {
            const sizeClass = size === "large" ? "w-10 h-10" : "w-8 h-8";
            return (
                <button 
                    onClick={onClick}
                    className={`${sizeClass} rounded-xl flex items-center justify-center transition-all ${checked ? "bg-blue-600 text-white shadow-lg shadow-blue-200" : "bg-gray-100 text-transparent"}`}
                >
                    <Icon.Check />
                </button>
            );
        }

        ReactDOM.render(<RoutineTracker />, document.getElementById('root'));
    </script>
</body>
</html>

